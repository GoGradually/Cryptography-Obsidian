실제 암호시스템의 붕괴로 인한 보안 위협보다
키 관리/분배로 인한 보안의 위협의 발생 확률이 훨씬 높다
ex) 잘못된 공개 키로 암호화했을 때(유효한 공개 키인지 인증의 필요성)

### 키 분배의 핵심
- 키의 분배를 안전하게 ->  보안상 문제가 주로 발생하는 부분
- 키의 변경을 빈번하게


### 키 분배 방법
1. 키를 물리적으로 직접 전달
2. 믿을 수 있는 제 3자가 키를 양쪽에 분배
3. 이전 키를 이용해 새로운 키를 전달
4. 믿을 수 있는 제 3자가 키를 전달
5. 

### 키를 관리하기 위한 키의 계층 구조
1. 세션 키
	임시 키. 일회성. short term key 라고도 불림. 한번의 논리적 세션에서의 사용 이후 버린다
2. 마스터 키
	마스터 키. 다회성. 사용자와 키 분배 센터(KDC) 가 공유함.
##### 기본 시나리오
![[Pasted image 20231128000650.png]]
1. KDC 에 B와 통신할 키 요청.
    - $ID_A||ID_B||N_1$
    - 이때 $N_1$ = 메시지의 freshness 확인용 Nonce
2. KDC는 뒤에 $N_1$ 섞어서 A의 비밀키 $K_a$ 로 암호화해 보냄
    - $E(K_a, [K_s||ID_A||ID_B||N_1]) || E(K_b, [K_s||ID_A])$
    - B의 마스터키(비밀키)로 암호화된 $E(K_b, [K_s||ID_A])$ 도 concatenate 하여 송신
3. $E(K_b, [K_s||ID_A])$ B에게 송신
4. $K_s$ 로 잘 동작하는지 확인 ($N_2$ 사용(nonce))
5. 잘 풀렸는지 확인
    이떄 $f(N_2) = N_2 + 1$ 
- $K_s$ 가 노출되면 공격자는 A의 행세가 가능해진다


### 키 분배상 이슈
1. KDC 의 신뢰도
2. 키 바로바로 교환
3. [[키 자동 분배]]
4. 병목현상 막기 위한 [[분산화된 키 분배]]
5. [[키의 사용처 제어]]


### 비대칭 키 이용한 공유 방법
- [[비밀 키 공유(대칭키 공유)]]
- [[공개 키 공유]]